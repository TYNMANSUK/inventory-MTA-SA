
<img width="1203" height="813" alt="{22E0B362-3CF5-455C-8D9B-617BD94C95A5}" src="https://github.com/user-attachments/assets/d0857eb0-9a9a-49ca-9a8e-3a420960037c" />

# Система инвентаря

Система инвентаря для MTA:SA с поддержкой перетаскивания (Drag & Drop), стаков предметов, прочности и категорий.

## Основные возможности
- Визуальный инвентарь с разделением на слоты экипировки и контейнеры (куртка, штаны, рюкзак).
- Окно "Vicinity" для взаимодействия с предметами в окружающем мире.
- Подробные подсказки с описанием, категорией, прочностью и количеством предметов.
- Поддержка предметов разного размера.
- Плавные анимации при перемещении предметов.

## Недавние исправления
- Устранена проблема с некорректным отображением сетки инвентаря при перетаскивании предметов, что обеспечило точное позиционирование.

---

## Как добавить свой предмет

Все предметы лежат в файле `inventory_system/item_config.lua`.

  **Добавьте предмет в `item_config.lua`:**
    *   Откройте файл `inventory_system/item_config.lua`.
    *   Внутри таблицы `Items` добавьте новую запись. Ключом должен быть уникальный ID предмета (в квадратных скобках).

### Пример добавления нового предмета

```lua
Items = {
    -- ... существующие предметы ...

    [12345] = { -- Уникальный ID вашего предмета
        name = "Мой новый предмет",
        image = "assets/items/my_new_item.png", -- Путь к вашей иконке
        w = 1, -- Ширина предмета в ячейках
        h = 1, -- Высота предмета в ячейках
        category = CATEGORIES.MISC, -- Категория (см. список категорий в этом же файле)
        description = "Это описание моего нового предмета.",
        
        -- Опциональные параметры:
        stackable = true, -- Можно ли стакать предмет (true/false)
        max_stack = 50, -- Максимальное количество в стаке (если stackable = true)
        
        durability = 100, -- Максимальная прочность
        current_durability = 100, -- Текущая прочность (можно опустить, по умолчанию будет равна максимальной)
        
        -- ... любые другие кастомные параметры
    },
    
    -- ... другие предметы ...
}
```

### Основные параметры:
*   `name`: Название предмета.
*   `image`: Путь к иконке.
*   `w`, `h`: Ширина и высота в ячейках инвентаря.
*   `category`: Категория предмета. Доступные категории определены в начале файла в таблице `CATEGORIES`.
*   `description`: Описание, которое будет отображаться в подсказке.

---

## Как добавить предмет в инвентарь игрока (через скрипт)

Чтобы добавить предмет в инвентарь игрока (например, при подборе с земли или через команду), вам нужно будет вызывать серверную или клиентскую функцию, которая отвечает за это.

На данный момент, для добавления предмета в `vicinity` (область рядом с игроком), вы можете использовать клиентскую функцию `addItem` у соответствующего контейнера.

### Пример:

```lua
-- Получаем контейнер "vicinity"
local vicinityContainer = InventoryRegistry.vicinity

-- Создаем новый предмет
-- Убедитесь, что ID (в данном случае 12345) существует в item_config.lua
local newItem = {
    id = 12345,
    count = 1, -- Количество (для стакаемых предметов)
    -- current_durability = 50 -- Можно указать текущую прочность
}

-- Добавляем предмет в контейнер
-- Координаты x, y - это ячейки в сетке "vicinity"
vicinityContainer:addItem(newItem, 1, 1) -- Добавить в ячейку (1, 1)

```
